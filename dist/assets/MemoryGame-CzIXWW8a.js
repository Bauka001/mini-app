import{j as i,c as x}from"./vendor-ui-CeXOM041.js";import{a as o}from"./vendor-react-BHatN85T.js";import{G as j}from"./GameWrapper-DlsME0o6.js";import{u as T}from"./index-BN-omT0U.js";import{u as M}from"./vendor-utils-IhVzdFhg.js";const I=()=>{const{t:c}=M(),{addGameResult:s}=T();return i.jsx(j,{title:c("game_memory","Memory Matrix"),instructions:c("memory_desc","Remember the highlighted tiles and repeat the pattern."),children:({onEnd:f})=>i.jsx(N,{onEnd:(a,d)=>{s({gameId:"memory",score:a,coinsEarned:d}),f(a,d)}})})},N=({onEnd:c})=>{const[s,f]=o.useState(1),[a,d]=o.useState(3),[l,v]=o.useState([]),[m,g]=o.useState([]),[n,u]=o.useState("showing"),[p,h]=o.useState(10),y=e=>Math.min(Math.floor(e/2)+2,a*a-1),b=o.useCallback(()=>{const e=a*a,r=y(s),t=[];for(;t.length<r;){const w=Math.floor(Math.random()*e);t.includes(w)||t.push(w)}return t},[s,a]);o.useEffect(()=>{const e=b();v(e),g([]),u("showing"),h(10);const r=setTimeout(()=>{u("playing")},1500);return()=>clearTimeout(r)},[s,b]),o.useEffect(()=>{if(n!=="playing")return;const e=setInterval(()=>{h(r=>r<=.1?(clearInterval(e),u("fail"),setTimeout(()=>{c(`Level ${s} (Time)`,s*5)},1e3),0):r-.1)},100);return()=>clearInterval(e)},[n,s,c]);const S=e=>{if(n!=="playing"||m.includes(e))return;const r=[...m,e];g(r),l.includes(e)?r.length===l.length&&(u("success"),setTimeout(()=>{f(t=>t+1),(s+1)%3===0&&a<5&&d(t=>t+1)},1e3)):(u("fail"),setTimeout(()=>{c(`Level ${s}`,s*10)},1e3))},_=e=>n==="showing"?l.includes(e)?"active":"default":n==="playing"?m.includes(e)?l.includes(e)?"correct":"wrong":"default":n==="success"?l.includes(e)?"success":"default":n==="fail"?l.includes(e)?"missed":m.includes(e)&&!l.includes(e)?"wrong":"default":"default";return i.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-4",children:[i.jsxs("div",{className:"mb-8 relative flex flex-col items-center",children:[i.jsxs("div",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 drop-shadow-lg",children:["Level ",s]}),n==="showing"&&i.jsx("div",{className:"absolute -bottom-6 left-1/2 -translate-x-1/2 text-sm text-purple-300 animate-pulse whitespace-nowrap",children:"Memorize..."}),n==="playing"&&i.jsxs("div",{className:x("absolute -bottom-8 left-1/2 -translate-x-1/2 text-sm font-bold transition-colors",p<3?"text-red-500 animate-pulse":"text-white"),children:[p.toFixed(1),"s"]})]}),i.jsx("div",{className:"grid gap-3 p-5 bg-white/5 backdrop-blur-xl rounded-3xl border border-white/10 shadow-2xl transition-all duration-300",style:{gridTemplateColumns:`repeat(${a}, minmax(0, 1fr))`,width:"min(90vw, 400px)",height:"min(90vw, 400px)"},children:Array.from({length:a*a}).map((e,r)=>{const t=_(r);return i.jsx("button",{onClick:()=>S(r),className:x("rounded-xl transition-all duration-300 relative overflow-hidden",t==="default"&&"bg-white/5 hover:bg-white/10 border border-white/5",t==="active"&&"bg-white shadow-[0_0_20px_rgba(255,255,255,0.6)] scale-105 border-white",t==="correct"&&"bg-gradient-to-br from-green-400 to-emerald-600 shadow-[0_0_20px_rgba(52,211,153,0.6)] scale-100 border-transparent",t==="wrong"&&"bg-gradient-to-br from-red-500 to-rose-700 shadow-[0_0_20px_rgba(244,63,94,0.6)] scale-90 border-transparent",t==="success"&&"bg-gradient-to-br from-purple-500 to-indigo-600 shadow-[0_0_20px_rgba(139,92,246,0.6)] scale-105 border-transparent",t==="missed"&&"bg-white/20 animate-pulse"),disabled:n!=="playing",children:i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent pointer-events-none"})},r)})})]})};export{I as MemoryGame,I as default};

import{j as s,r as M,S as F,H as S,Z as T,s as P,t as C,u as E,e as G,c as x}from"./vendor-ui-CeXOM041.js";import{a as c}from"./vendor-react-BHatN85T.js";import{G as R}from"./GameWrapper-DlsME0o6.js";import{u as k}from"./index-BN-omT0U.js";import{u as _}from"./vendor-utils-IhVzdFhg.js";const w=[M,F,S,T,P,C,E,G],A=()=>{const{t:m}=_(),{addGameResult:a}=k();return s.jsx(R,{title:m("game_pairs","Pairs"),instructions:m("pairs_desc","Find all matching pairs of cards."),children:({onEnd:i})=>s.jsx(B,{onEnd:(p,d)=>{a({gameId:"pairs",score:p,coinsEarned:d}),i(p,d)}})})},B=({onEnd:m})=>{const[a,i]=c.useState([]),[p,d]=c.useState([]),[v,g]=c.useState(0),[h,N]=c.useState(60),[b,y]=c.useState(!0),j=c.useRef(0);c.useEffect(()=>{const r=w.slice(0,6),n=[...r,...r].map((o,e)=>({id:e,iconIndex:e%6,isFlipped:!0,isMatched:!1})).sort(()=>Math.random()-.5);i(n),j.current=0;const u=setTimeout(()=>{i(e=>e.map(l=>({...l,isFlipped:!1}))),y(!1);const o=setInterval(()=>{N(e=>e<=.1?(clearInterval(o),m("Time's up",0),0):e-.1)},100);return()=>clearInterval(o)},3e3);return()=>clearTimeout(u)},[]);const I=t=>{if(b||a[t].isMatched||a[t].isFlipped||p.length>=2)return;const r=[...a];r[t].isFlipped=!0,i(r);const n=[...p,t];if(d(n),n.length===2){g(e=>e+1);const[u,o]=n;a[u].iconIndex===a[o].iconIndex?setTimeout(()=>{if(i(e=>e.map((l,f)=>f===u||f===o?{...l,isMatched:!0}:l)),d([]),j.current+=1,j.current===6){const e=Math.max(0,100-v*2+Math.floor(h));m(`${e} pts`,Math.floor(e/2))}},500):setTimeout(()=>{i(e=>e.map((l,f)=>f===u||f===o?{...l,isFlipped:!1}:l)),d([])},1e3)}};return s.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-4",children:[s.jsxs("div",{className:"mb-6 flex justify-between w-full max-w-sm",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase",children:"Time"}),s.jsxs("span",{className:x("text-2xl font-mono font-bold",h<10?"text-red-500":"text-white"),children:[h.toFixed(0),"s"]})]}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase",children:"Moves"}),s.jsx("span",{className:"text-2xl font-mono font-bold text-white",children:v})]})]}),s.jsx("div",{className:"grid grid-cols-3 gap-3 w-full max-w-sm",children:a.map((t,r)=>{const n=w[t.iconIndex];return s.jsxs("button",{onClick:()=>I(r),className:x("aspect-square rounded-xl transition-all duration-300 transform perspective-1000 relative",t.isFlipped||t.isMatched?"rotate-y-180 bg-white":"bg-white/10 hover:bg-white/20"),children:[s.jsx("div",{className:x("absolute inset-0 flex items-center justify-center transition-opacity duration-300",t.isFlipped||t.isMatched?"opacity-100":"opacity-0"),children:s.jsx(n,{size:32,className:"text-primary"})}),s.jsx("div",{className:x("absolute inset-0 flex items-center justify-center transition-opacity duration-300",t.isFlipped||t.isMatched?"opacity-0":"opacity-100"),children:s.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white/10"})})]},t.id)})})]})};export{A as PairsGame,A as default};

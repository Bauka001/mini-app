var O=Object.defineProperty;var S=(n,t,s)=>t in n?O(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;var u=(n,t,s)=>S(n,typeof t!="symbol"?t+"":t,s);import{j as e,_ as b,q as A,C as f,R as T}from"./vendor-ui-CeXOM041.js";import{a as d,u as z}from"./vendor-react-BHatN85T.js";import{u as _}from"./index-BN-omT0U.js";import{u as R}from"./vendor-utils-IhVzdFhg.js";class E{constructor(){u(this,"context",null);u(this,"enabled",!0);try{this.context=new(window.AudioContext||window.webkitAudioContext)}catch{console.error("AudioContext not supported")}}setEnabled(t){this.enabled=t}async ensureContext(){return this.context?(this.context.state==="suspended"&&await this.context.resume(),!0):!1}playOscillator(t,s,a,x,o){if(!this.context)return;const l=this.context.createOscillator(),r=this.context.createGain();l.type=s,l.frequency.setValueAtTime(t,a),r.gain.setValueAtTime(0,a),r.gain.linearRampToValueAtTime(o,a+.01),r.gain.exponentialRampToValueAtTime(.001,a+x),l.connect(r),r.connect(this.context.destination),l.start(a),l.stop(a+x)}async playClick(){if(!this.enabled||!await this.ensureContext())return;const t=this.context.currentTime,s=this.context.createOscillator(),a=this.context.createGain();s.frequency.setValueAtTime(600,t),s.frequency.exponentialRampToValueAtTime(100,t+.1),a.gain.setValueAtTime(.1,t),a.gain.exponentialRampToValueAtTime(.01,t+.1),s.connect(a),a.connect(this.context.destination),s.start(t),s.stop(t+.1)}async playSuccess(){if(!this.enabled||!await this.ensureContext())return;const t=this.context.currentTime;this.playOscillator(880,"sine",t,.4,.1),this.playOscillator(1760,"sine",t,.4,.05)}async playError(){if(!this.enabled||!await this.ensureContext())return;const t=this.context.currentTime;this.playOscillator(150,"triangle",t,.3,.15),this.playOscillator(140,"triangle",t+.05,.3,.15)}async playWin(){if(!this.enabled||!await this.ensureContext())return;const t=this.context.currentTime,s=.08;this.playOscillator(523.25,"sine",t,.6,.1),this.playOscillator(659.25,"sine",t+s,.6,.1),this.playOscillator(783.99,"sine",t+s*2,.6,.1),this.playOscillator(987.77,"sine",t+s*3,.8,.1),this.playOscillator(1046.5,"sine",t+s*4,1,.15)}}const c=new E,W=({title:n,instructions:t,children:s,onExit:a})=>{const[x,o]=d.useState("instruction"),[l,r]=d.useState(null),[g,y]=d.useState(0),w=z(),{t:i}=R(),{coins:v,soundEnabled:p}=_();d.useEffect(()=>{c.setEnabled(p)},[p]);const j=()=>{c.playClick(),o("playing")},N=(C,m)=>{m>0?c.playWin():c.playSuccess(),r(C),y(m),o("finished")},k=()=>{c.playClick(),o("playing")},h=()=>{c.playClick(),a?a():w("/")};return x==="instruction"?e.jsxs("div",{className:"flex flex-col h-screen bg-black text-white p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-[-20%] right-[-20%] w-[500px] h-[500px] bg-primary/20 rounded-full blur-[100px] pointer-events-none"}),e.jsx("button",{onClick:h,className:"relative z-10 mb-6 w-fit p-2 rounded-full hover:bg-white/10 transition-colors",children:e.jsx(b,{size:24})}),e.jsxs("div",{className:"relative z-10 flex-1 flex flex-col items-center justify-center text-center",children:[e.jsx("h1",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-primary to-orange-400 mb-8 drop-shadow-lg",children:n}),e.jsxs("div",{className:"bg-secondary/80 backdrop-blur-xl p-8 rounded-3xl mb-12 w-full max-w-sm border border-white/10 shadow-2xl",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-white uppercase tracking-wider",children:i("instructions","Instructions")}),e.jsx("p",{className:"text-gray-300 leading-relaxed text-lg",children:t})]}),e.jsxs("button",{onClick:j,className:"group bg-gradient-to-r from-primary to-orange-400 text-black font-black py-5 px-16 rounded-full text-xl hover:scale-105 transition-all shadow-[0_0_20px_rgba(255,215,0,0.3)] hover:shadow-[0_0_40px_rgba(255,215,0,0.5)] flex items-center gap-3",children:[e.jsx(A,{size:28,fill:"currentColor",className:"group-hover:translate-x-1 transition-transform"}),i("start","Start")]})]})]}):x==="finished"?e.jsxs("div",{className:"flex flex-col h-screen bg-black text-white p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute bottom-[-20%] left-[-20%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-[100px] pointer-events-none"}),e.jsxs("div",{className:"relative z-10 flex-1 flex flex-col items-center justify-center text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-8",children:i("game_over","Game Over")}),e.jsxs("div",{className:"bg-secondary/80 backdrop-blur-xl p-8 rounded-3xl mb-8 w-full max-w-sm border border-white/10 relative overflow-hidden shadow-2xl",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary to-transparent opacity-50"}),e.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-400",children:i("result","Result")}),e.jsx("p",{className:"text-5xl font-mono font-bold text-transparent bg-clip-text bg-gradient-to-br from-white to-gray-400 mb-8",children:typeof l=="object"?JSON.stringify(l):l}),e.jsxs("div",{className:"flex flex-col items-center gap-2 bg-black/40 p-4 rounded-2xl border border-white/5",children:[e.jsx("span",{className:"text-gray-400 text-sm font-medium uppercase tracking-wide",children:i("coins_earned")}),e.jsxs("div",{className:"flex items-center gap-2 text-primary text-4xl font-black",children:[e.jsx(f,{size:32,fill:"currentColor"}),"+",g]})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 w-full max-w-xs",children:[e.jsxs("button",{onClick:k,className:"bg-white text-black font-bold py-4 px-8 rounded-full text-lg hover:scale-105 transition-transform flex items-center justify-center gap-2 shadow-lg",children:[e.jsx(T,{size:20}),i("play_again","Play Again")]}),e.jsx("button",{onClick:h,className:"bg-transparent text-white font-bold py-4 px-8 rounded-full text-lg border border-white/20 hover:bg-white/10 transition-colors",children:i("menu","Menu")})]})]})]}):e.jsxs("div",{className:"h-screen bg-black text-white flex flex-col relative",children:[e.jsx("div",{className:"absolute top-[-50%] left-[-50%] w-[1000px] h-[1000px] bg-primary/5 rounded-full blur-[150px] pointer-events-none"}),e.jsxs("div",{className:"relative z-10 p-4 flex items-center justify-between bg-secondary/30 backdrop-blur-md border-b border-white/5",children:[e.jsx("button",{onClick:()=>o("instruction"),className:"p-2 rounded-full hover:bg-white/10 transition-colors",children:e.jsx(b,{size:20})}),e.jsx("h1",{className:"font-bold text-lg text-primary tracking-wide",children:n}),e.jsxs("div",{className:"flex items-center gap-1.5 bg-black/40 px-4 py-1.5 rounded-full text-sm border border-primary/20 text-primary font-bold",children:[e.jsx(f,{size:16,fill:"currentColor"}),v]})]}),e.jsx("div",{className:"flex-1 overflow-hidden relative z-10",children:s({onEnd:N})})]})};export{W as G,c as s};

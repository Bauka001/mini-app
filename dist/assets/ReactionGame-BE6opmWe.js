import{j as e,c as k,Z as h,v as T,w as C,R as S}from"./vendor-ui-CeXOM041.js";import{u as E,a}from"./vendor-react-BHatN85T.js";import{G as M,s as f}from"./GameWrapper-DlsME0o6.js";import"./index-BN-omT0U.js";import"./vendor-utils-IhVzdFhg.js";const z=({onEnd:l})=>{const p=E(),[s,o]=a.useState("waiting"),[b,g]=a.useState(0),[w,j]=a.useState(0),[i,N]=a.useState(0),[x,y]=a.useState([]),n=a.useRef(null);a.useEffect(()=>(r(),()=>{n.current&&clearTimeout(n.current)}),[]);const r=()=>{o("waiting");const t=Math.floor(Math.random()*3e3)+2e3;n.current=setTimeout(()=>{o("ready"),g(Date.now())},t)},m=()=>{if(s==="waiting")o("early"),f.playError(),n.current&&clearTimeout(n.current);else if(s==="ready"){const t=Date.now()-b;j(t),o("clicked"),y(c=>[...c,t]),f.playSuccess()}},u=()=>{if(i>=4){const t=Math.floor(x.reduce((v,R)=>v+R,0)/x.length),c=Math.max(0,Math.floor((400-t)/5));l(`${t} ms`,c)}else N(t=>t+1),r()},d=()=>{r()};return e.jsxs("div",{className:k("w-full h-full flex flex-col items-center justify-center cursor-pointer transition-colors duration-200 p-6 rounded-3xl select-none",s==="waiting"&&"bg-red-500 hover:bg-red-600",s==="ready"&&"bg-green-500 active:bg-green-600",s==="early"&&"bg-blue-500",s==="clicked"&&"bg-blue-500"),onMouseDown:m,onTouchStart:m,children:[s==="waiting"&&e.jsxs("div",{className:"text-center animate-pulse",children:[e.jsx("h2",{className:"text-5xl font-black text-white mb-4",children:"WAIT..."}),e.jsx(h,{size:48,className:"text-white/50 mx-auto"})]}),s==="ready"&&e.jsx("div",{className:"text-center",children:e.jsx("h2",{className:"text-6xl font-black text-white animate-bounce",children:"CLICK!"})}),s==="early"&&e.jsxs("div",{className:"text-center w-full h-full flex flex-col items-center justify-center",onClick:t=>{t.stopPropagation(),d()},children:[e.jsx(T,{size:80,className:"text-white mx-auto mb-6"}),e.jsx("h2",{className:"text-4xl font-black text-white mb-4",children:"Too Early!"}),e.jsx("p",{className:"text-white/80 text-xl font-bold animate-pulse mb-8",children:"Tap to try again"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:t=>{t.stopPropagation(),p("/")},className:"px-6 py-3 bg-white/20 text-white font-bold rounded-xl flex items-center gap-2 hover:bg-white/30",children:[e.jsx(C,{size:20})," Menu"]}),e.jsxs("button",{onClick:t=>{t.stopPropagation(),d()},className:"px-6 py-3 bg-white text-blue-600 font-bold rounded-xl flex items-center gap-2 hover:scale-105 transition-transform",children:[e.jsx(S,{size:20})," Retry"]})]})]}),s==="clicked"&&e.jsxs("div",{className:"text-center w-full h-full flex flex-col items-center justify-center",onClick:t=>{t.stopPropagation(),u()},children:[e.jsx(h,{size:80,className:"text-white mx-auto mb-6"}),e.jsxs("h2",{className:"text-7xl font-black text-white mb-4",children:[w," ms"]}),e.jsx("p",{className:"text-white/80 text-xl font-bold animate-pulse mb-8",children:"Tap to continue"}),e.jsx("button",{onClick:t=>{t.stopPropagation(),u()},className:"px-8 py-4 bg-white text-blue-600 font-bold rounded-2xl text-xl hover:scale-105 transition-transform shadow-lg",children:i>=4?"Finish Game":"Next Round"})]}),e.jsxs("div",{className:"absolute bottom-10 text-white/50 font-bold text-sm",children:["Round ",i+1," / 5"]})]})},I=()=>e.jsx(M,{title:"Reaction",instructions:"1. Wait for RED.\\n2. Tap when GREEN.",children:({onEnd:l})=>e.jsx(z,{onEnd:l})});export{I as default};
